<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width = device-width, height = device-height, initial-scale=1">
  <title>echo</title>

  <link href="./semantic.min.css" rel="stylesheet">
  <script src="./jquery-3.3.1.min.js"></script>
  <script src="./semantic.min.js"></script>
  <script>
    $(function(){
      $.jsonRPC.setup({
        endPoint : 'http://localhost:3000/api',
        namespace : ''
      });

      $('#requestButton').click(function(){
        var message = $('#messageInput').val();
        var method = 'echo';

        $jsonRPC.request(method,{
          id : 1001,
          params : [message],
          success : function(data){
            println('정상 응답을 받았습니다.');
            console.dir(data);
            println(data.result);
          },
          error : function(data){
            println('오류 응답을 받았습니다.');
            console.dir(data);
            println(data.error.message);
          }
        });
        println('[' + method + '] method로 요청을 보냈습니다.')
      });
    });
  </script>

</head>

<body>
  <h3>JSON-RPC Echo 테스트</h3>
  <br />
  <textare name="messageInput" id="messageInput"></textare>
  <br />
  <input type="button" name="requestButton" id="requestButton" value="요청하기" />
  <br />
  <p>
    결과
  </p>
  <div id="results">
  </div>
</body>

</html>
